# DATA Directory

This directory contains the dataset and preprocessed files for the heart rate prediction project.

## Required Files

### Raw Dataset (Not included in repository)

**File**: `endomondoHR.json`
- Source: Endomondo Fitness Tracking Dataset (FitRec project)
- Size: ~2-3 GB
- Format: JSON lines (one workout per line)
- Contains: 253,020+ running workouts with heart rate data

**You must download this file separately and place it here.**

### Directory Structure

```
DATA/
├── endomondoHR.json          # Raw dataset (download separately)
├── processed/                # Generated by preprocessing scripts
│   ├── train.pt             # Training set (PyTorch tensors)
│   ├── val.pt               # Validation set
│   ├── test.pt              # Test set
│   ├── scaler_params.json   # Normalization parameters
│   └── metadata.json        # Dataset statistics
├── temp/                     # Temporary files (streaming preprocessing)
│   └── batch_*.pt           # Temporary batch files (auto-deleted)
└── README.md                 # This file
```

## How to Obtain the Dataset

1. Download the Endomondo dataset from the FitRec project
2. Extract `endomondoHR.json` from the archive
3. Place it in this directory: `DATA/endomondoHR.json`
4. Run preprocessing: `python3 Preprocessing/prepare_sequences_v2.py`

## Generated Files

After running preprocessing, you will see:

### `processed/train.pt`, `val.pt`, `test.pt`
PyTorch tensors containing:
- `speed`: [N, seq_len, 1] - Normalized speed sequences
- `altitude`: [N, seq_len, 1] - Normalized altitude sequences
- `heart_rate`: [N, seq_len, 1] - Heart rate targets (unnormalized)
- `gender`: [N, 1] - Binary gender encoding (1=male, 0=female)
- `userId`: [N, 1] - User identifiers
- `original_lengths`: [N, 1] - Original sequence lengths before padding

### `processed/scaler_params.json`
Normalization parameters:
```json
{
  "speed_mean": <float>,
  "speed_std": <float>,
  "altitude_mean": <float>,
  "altitude_std": <float>
}
```

### `processed/metadata.json`
Dataset statistics:
```json
{
  "sequence_length": 500,
  "num_train": <int>,
  "num_val": <int>,
  "num_test": <int>,
  "random_seed": 42,
  "version": "v2"
}
```

## .gitignore

The following are excluded from version control:
- `endomondoHR.json` (too large)
- `processed/*.pt` (generated files)
- `temp/*` (temporary files)

Only this README is tracked in git.
